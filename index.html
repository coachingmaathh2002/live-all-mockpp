<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WB Group C & D মক টেস্ট</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 800px;
        }
        .message-box {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 100;
            transition: transform 0.3s ease-in-out;
            transform: translateY(-150%);
        }
        .message-box.show {
            transform: translateY(0);
        }
        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fade-in-up {
            animation: fade-in-up 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- Main Container -->
    <div class="container bg-white rounded-xl shadow-2xl overflow-hidden animate-fade-in-up">
        <!-- Header -->
        <header class="bg-blue-600 text-white p-6 md:p-8 text-center rounded-t-xl">
            <h1 class="text-3xl md:text-4xl font-bold">WB Group C & D মক টেস্ট পোর্টাল</h1>
            <p class="mt-2 text-sm md:text-base opacity-90">আপনার পরীক্ষার প্রস্তুতির জন্য একটি অনুশীলন পরীক্ষা।</p>
        </header>

        <!-- Message Box for Alerts -->
        <div id="message-box" class="message-box bg-red-500 text-white p-4 rounded-lg shadow-lg">
            <p id="message-text"></p>
        </div>

        <!-- Login Section -->
        <div id="login-section" class="p-6 md:p-10 text-center">
            <h2 class="text-2xl font-semibold text-gray-800">পরীক্ষা শুরু করতে লগইন করুন</h2>
            <form id="login-form" class="mt-6 space-y-4">
                <input type="text" id="name" placeholder="আপনার নাম লিখুন" class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:outline-none focus:border-blue-500 transition duration-300">
                <input type="tel" id="mobile" placeholder="আপনার মোবাইল নম্বর লিখুন" class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:outline-none focus:border-blue-500 transition duration-300">
                <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition duration-300 transform hover:scale-105 shadow-md">পরীক্ষা শুরু করুন</button>
            </form>
        </div>

        <!-- Test Section (Initially Hidden) -->
        <div id="test-section" class="hidden p-6 md:p-10">
            <h2 class="text-2xl font-semibold text-gray-800 text-center mb-6">মক টেস্ট</h2>
            <p id="user-info" class="text-center text-sm mb-4 text-gray-600"></p>
            <div id="timer" class="text-center font-bold text-gray-700 text-lg mb-6">সময় বাকি: 60:00</div>
            <div id="quiz-container" class="space-y-6">
                <!-- Questions will be injected here by JavaScript -->
            </div>
            <div class="text-center mt-8">
                <button id="submit-button" class="bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 transition duration-300 transform hover:scale-105 shadow-md">উত্তর জমা দিন</button>
            </div>
        </div>

        <!-- Results Section (Initially Hidden) -->
        <div id="results-section" class="hidden p-6 md:p-10 text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">পরীক্ষার ফলাফল</h2>
            <div class="bg-gray-100 p-6 rounded-lg">
                <p id="result-message" class="text-lg text-gray-700 mb-2">খুব ভালো, <span id="final-name" class="font-semibold text-blue-600"></span>!</p>
                <p class="text-xl text-gray-800 font-medium">আপনার স্কোর: <span id="score" class="text-2xl font-bold text-green-600">0</span> / <span id="total-questions" class="font-bold">0</span></p>
                <p id="congratulations" class="text-green-500 mt-2 font-semibold hidden">অভিনন্দন! আপনি পাশ করেছেন!</p>
                <p id="try-again" class="text-red-500 mt-2 font-semibold hidden">চিন্তা করবেন না, আবার চেষ্টা করুন!</p>
            </div>
            <button id="retake-button" class="mt-8 bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition duration-300 transform hover:scale-105 shadow-md">আবার পরীক্ষা দিন</button>
        </div>
    </div>

    <script>
        // Data for the mock test questions (60 questions total)
        const questions = [
            // General Knowledge (সাধারণ জ্ঞান) - 15 questions
            {
                category: "সাধারণ জ্ঞান",
                question: "কোন নদীকে 'বাংলার দুঃখ' বলা হয়?",
                options: ["গঙ্গা", "দামোদর", "হুগলি", "তিস্তা"],
                answer: "দামোদর"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "ইউনেস্কো বিশ্ব ঐতিহ্যবাহী স্থান সুন্দরবন কোন প্রাণীর জন্য বিখ্যাত?",
                options: ["এশিয়াটিক সিংহ", "রয়েল বেঙ্গল টাইগার", "ভারতীয় গণ্ডার", "ভারতীয় হাতি"],
                answer: "রয়েল বেঙ্গল টাইগার"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "পশ্চিমবঙ্গে কতগুলি জেলা আছে?",
                options: ["২০", "২৩", "২৫", "২৯"],
                answer: "২৩"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "পশ্চিমবঙ্গের প্রধান ফসলের নাম কী?",
                options: ["গম", "ধান", "পাট", "চা"],
                answer: "ধান"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "পশ্চিমবঙ্গের রাজ্য পাখির নাম কী?",
                options: ["ময়না", "শালিক", "শাদা গলা মাছরাঙা", "ডাহুক"],
                answer: "শাদা গলা মাছরাঙা"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "ভারতীয় সংবিধানের জনক কে?",
                options: ["জওহরলাল নেহেরু", "ড. বি. আর. আম্বেদকর", "মহাত্মা গান্ধী", "সর্দার বল্লভভাই প্যাটেল"],
                answer: "ড. বি. আর. আম্বেদকর"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "আয়তনের দিক থেকে ভারতের বৃহত্তম রাজ্য কোনটি?",
                options: ["উত্তর প্রদেশ", "মধ্য প্রদেশ", "রাজস্থান", "মহারাষ্ট্র"],
                answer: "রাজস্থান"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "পশ্চিমবঙ্গের একটি প্রধান উৎসব দুর্গাপূজা কোন মাসে পালিত হয়?",
                options: ["জানুয়ারি", "মার্চ", "অক্টোবর", "ডিসেম্বর"],
                answer: "অক্টোবর"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "ভারতের জাতীয় পশুর নাম কী?",
                options: ["সিংহ", "বাঘ", "হাতি", "হরিণ"],
                answer: "বাঘ"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "পৃথিবীর বৃহত্তম মহাদেশ কোনটি?",
                options: ["আফ্রিকা", "আমেরিকা", "ইউরোপ", "এশিয়া"],
                answer: "এশিয়া"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "পশ্চিমবঙ্গের রাজ্য ফুলের নাম কী?",
                options: ["গোলাপ", "পদ্ম", "শাপলা", "শিউলি"],
                answer: "শিউলি"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "কোন গ্রহকে লাল গ্রহ বলা হয়?",
                options: ["বৃহস্পতি", "শনি", "মঙ্গল", "শুক্র"],
                answer: "মঙ্গল"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "ভারতীয় রেলের সদর দপ্তর কোথায় অবস্থিত?",
                options: ["কলকাতা", "মুম্বাই", "নয়া দিল্লি", "চেন্নাই"],
                answer: "নয়া দিল্লি"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "পশ্চিমবঙ্গের রাজ্য মাছের নাম কী?",
                options: ["রুই", "কাতলা", "ইলিশ", "ভেটকি"],
                answer: "ইলিশ"
            },
            {
                category: "সাধারণ জ্ঞান",
                question: "সবচেয়ে হালকা গ্যাস কোনটি?",
                options: ["নাইট্রোজেন", "অক্সিজেন", "হাইড্রোজেন", "হিলিয়াম"],
                answer: "হাইড্রোজেন"
            },

            // Arithmetic (পাটিগণিত) - 15 questions
            {
                category: "পাটিগণিত",
                question: "একটি বর্গক্ষেত্রের পরিসীমা ১৬ সেমি হলে, তার ক্ষেত্রফল কত?",
                options: ["৪ বর্গ সেমি", "৮ বর্গ সেমি", "১২ বর্গ সেমি", "১৬ বর্গ সেমি"],
                answer: "১৬ বর্গ সেমি"
            },
            {
                category: "পাটিগণিত",
                question: "একটি পণ্য ২০০ টাকায় কিনে ২৫০ টাকায় বিক্রি করলে শতকরা লাভ কত?",
                options: ["২০%", "২৫%", "৫০%", "১০%"],
                answer: "২৫%"
            },
            {
                category: "পাটিগণিত",
                question: "১২ এর বর্গ কত?",
                options: ["১০২", "১৪৪", "১২১", "১৩২"],
                answer: "১৪৪"
            },
            {
                category: "পাটিগণিত",
                question: "০.৫ + ০.২৫ + ০.১২৫ এর যোগফল কত?",
                options: ["০.৮৭৫", "০.৫৭৫", "০.৬৭৫", "০.৭৭৫"],
                answer: "০.৮৭৫"
            },
            {
                category: "পাটিগণিত",
                question: "১০০ টাকার ওপর ১০% ছাড় দিলে কত টাকা ছাড় হবে?",
                options: ["৫ টাকা", "১০ টাকা", "১৫ টাকা", "২০ টাকা"],
                answer: "১০ টাকা"
            },
            {
                category: "পাটিগণিত",
                question: "৩, ৫, ৭, ৯ এর গড় কত?",
                options: ["৬", "৫", "৭", "৮"],
                answer: "৬"
            },
            {
                category: "পাটিগণিত",
                question: "যদি A একটি কাজ ১০ দিনে করতে পারে এবং B সেই কাজ ১৫ দিনে করতে পারে, তাহলে তারা একসাথে কাজটি কত দিনে করতে পারবে?",
                options: ["৫ দিন", "৬ দিন", "৮ দিন", "১২ দিন"],
                answer: "৬ দিন"
            },
            {
                category: "পাটিগণিত",
                question: "১০০০ এর ১% কত?",
                options: ["১", "১০", "১০০", "০.১"],
                answer: "১০"
            },
            {
                category: "পাটিগণিত",
                question: "১ মিটার সমান কত সেন্টিমিটার?",
                options: ["১০ সেমি", "১০০ সেমি", "১০০০ সেমি", "০.১ সেমি"],
                answer: "১০০ সেমি"
            },
            {
                category: "পাটিগণিত",
                question: "একটি ট্রেনের গতি ৬০ কিমি/ঘণ্টা হলে, এটি ২ ঘণ্টায় কত দূরত্ব অতিক্রম করবে?",
                options: ["৩০ কিমি", "৬০ কিমি", "১০০ কিমি", "১২০ কিমি"],
                answer: "১২০ কিমি"
            },
            {
                category: "পাটিগণিত",
                question: "৪ এর কিউব কত?",
                options: ["১৬", "২৪", "৬৪", "১২৮"],
                answer: "৬৪"
            },
            {
                category: "পাটিগণিত",
                question: "যদি একটি বৃত্তের ব্যাসার্ধ ৭ সেমি হয়, তাহলে তার পরিধি কত?",
                options: ["১৪ সেমি", "২১ সেমি", "২২ সেমি", "৪৪ সেমি"],
                answer: "৪৪ সেমি"
            },
            {
                category: "পাটিগণিত",
                question: "৫০ এর দ্বিগুণ কত?",
                options: ["২৫", "৭৫", "১০০", "১৫০"],
                answer: "১০০"
            },
            {
                category: "পাটিগণিত",
                question: "একটি আয়তক্ষেত্রের দৈর্ঘ্য ৮ সেমি এবং প্রস্থ ৫ সেমি হলে, তার ক্ষেত্রফল কত?",
                options: ["১৩ বর্গ সেমি", "৪০ বর্গ সেমি", "৪৫ বর্গ সেমি", "৫০ বর্গ সেমি"],
                answer: "৪০ বর্গ সেমি"
            },
            {
                category: "পাটিগণিত",
                question: "১ থেকে ১০ পর্যন্ত স্বাভাবিক সংখ্যার যোগফল কত?",
                options: ["৪৫", "৫০", "৫৫", "৬০"],
                answer: "৫৫"
            },
            // Current Affairs (সাম্প্রতিক ঘটনা) - 15 questions
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "২০২৩ সালের ক্রিকেট বিশ্বকাপ ফাইনাল কোন স্টেডিয়ামে অনুষ্ঠিত হয়েছিল?",
                options: ["লর্ডস ক্রিকেট গ্রাউন্ড", "মেলবোর্ন ক্রিকেট গ্রাউন্ড", "নরেন্দ্র মোদি স্টেডিয়াম", "ইডেন গার্ডেনস"],
                answer: "নরেন্দ্র মোদি স্টেডিয়াম"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "ভারতের চন্দ্রযান-৩ কোন তারিখে চাঁদের দক্ষিণ মেরুতে অবতরণ করে?",
                options: ["২৩শে আগস্ট, ২০২৩", "১৪ই জুলাই, ২০২৩", "১৫ই আগস্ট, ২০২৩", "১লা সেপ্টেম্বর, ২০২৩"],
                answer: "২৩শে আগস্ট, ২০২৩"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "২০২৪ সালের গ্রীষ্মকালীন অলিম্পিক কোথায় অনুষ্ঠিত হবে?",
                options: ["লস অ্যাঞ্জেলেস", "টোকিও", "প্যারিস", "রোম"],
                answer: "প্যারিস"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "ভারতের বর্তমান রাষ্ট্রপতি কে?",
                options: ["রাম নাথ কোবিন্দ", "প্রণব মুখার্জি", "দ্রৌপদী মুর্মু", "ভেঙ্কাইয়া নাইডু"],
                answer: "দ্রৌপদী মুর্মু"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "ভারতের বর্তমান প্রধানমন্ত্রী কে?",
                options: ["অমিত শাহ", "রাজনাথ সিং", "নরেন্দ্র মোদি", "মনমোহন সিং"],
                answer: "নরেন্দ্র মোদি"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "২০২২ সালের ফিফা বিশ্বকাপ কোন দেশ জিতেছিল?",
                options: ["ফ্রান্স", "আর্জেন্টিনা", "ব্রাজিল", "জার্মানি"],
                answer: "আর্জেন্টিনা"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "২০২৩ সালের নোবেল শান্তি পুরস্কার কে পেয়েছেন?",
                options: ["নার্গিস মোহম্মদি", "আলেস বিয়ালিয়াতস্কি", "অভিজিৎ ব্যানার্জি", "মারিয়া রেসা"],
                answer: "নার্গিস মোহম্মদি"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "ভারতের নতুন সংসদ ভবন কোন বছরে উদ্বোধন করা হয়?",
                options: ["২০২২", "২০২৩", "২০২৪", "২০২১"],
                answer: "২০২৩"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "সৌরজগতের নতুন গ্রহ হিসেবে কোনটিকে ধরা হয়?",
                options: ["প্লুটো", "নেপচুন", "প্লুটোকে গ্রহ হিসেবে ধরা হয় না", "সেরেস"],
                answer: "প্লুটোকে গ্রহ হিসেবে ধরা হয় না"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "G20-এর ২০২৪ সালের সম্মেলন কোন দেশে অনুষ্ঠিত হবে?",
                options: ["ভারত", "ইন্দোনেশিয়া", "ব্রাজিল", "দক্ষিণ আফ্রিকা"],
                answer: "ব্রাজিল"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "ভারতীয় রিজার্ভ ব্যাঙ্কের বর্তমান গভর্নর কে?",
                options: ["উর্জিৎ প্যাটেল", "রঘুরাম রাজন", "শক্তি কান্ত দাস", "নির্মলা সীতারামন"],
                answer: "শক্তি কান্ত দাস"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "২০২৩ সালের এশিয়া কাপ ক্রিকেট টুর্নামেন্টের বিজয়ী দল কোনটি?",
                options: ["পাকিস্তান", "বাংলাদেশ", "শ্রীলঙ্কা", "ভারত"],
                answer: "ভারত"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "২০২৪ সালের টেনিসের উইম্বলডন চ্যাম্পিয়ন কে?",
                options: ["কার্লোস আলকারাজ", "নোভাক জোকোভিচ", "রজার ফেদেরার", "রাফায়েল নাদাল"],
                answer: "কার্লোস আলকারাজ"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "কোন দেশের বিজ্ঞানীরা প্রথম সফলভাবে মানব হৃদপিণ্ড প্রতিস্থাপন করেছেন?",
                options: ["চীন", "রাশিয়া", "মার্কিন যুক্তরাষ্ট্র", "জাপান"],
                answer: "মার্কিন যুক্তরাষ্ট্র"
            },
            {
                category: "সাম্প্রতিক ঘটনা",
                question: "ভারতের কোন শহরে প্রথম বুলেট ট্রেন চলবে?",
                options: ["কলকাতা", "দিল্লি", "মুম্বাই", "চেন্নাই"],
                answer: "মুম্বাই"
            },
            // General English (সাধারণ ইংরেজি) - 15 questions
            {
                category: "সাধারণ ইংরেজি",
                question: "Choose the correct synonym of 'diligent'.",
                options: ["Lazy", "Industrious", "Weak", "Clumsy"],
                answer: "Industrious"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "Find the antonym of 'ancient'.",
                options: ["Old", "Modern", "Classic", "Historic"],
                answer: "Modern"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "Fill in the blank: The sun ________ in the east.",
                options: ["rise", "is rising", "rises", "has risen"],
                answer: "rises"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "What is the past tense of 'sing'?",
                options: ["sanged", "song", "sung", "sang"],
                answer: "sang"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "Choose the correct preposition: He is good ________ maths.",
                options: ["in", "at", "on", "for"],
                answer: "at"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "Choose the correct article: ________ elephant is a big animal.",
                options: ["A", "An", "The", "No article"],
                answer: "An"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "What is the plural of 'child'?",
                options: ["childs", "childes", "children", "childen"],
                answer: "children"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "Complete the sentence: He came ________ car.",
                options: ["in", "by", "on", "with"],
                answer: "by"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "Which of the following is a collective noun for a group of lions?",
                options: ["Flock", "Herd", "Pride", "School"],
                answer: "Pride"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "Identify the adjective in the sentence: 'The red car is fast.'",
                options: ["The", "car", "is", "red"],
                answer: "red"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "Choose the correct spelling:",
                options: ["Recieve", "Recieve", "Receive", "Recieve"],
                answer: "Receive"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "What is the superlative degree of 'good'?",
                options: ["gooder", "best", "more good", "well"],
                answer: "best"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "Fill in the blank: I will call you ________ I get home.",
                options: ["until", "when", "after", "before"],
                answer: "when"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "Choose the correct phrasal verb: He gave ________ his bad habits.",
                options: ["in", "up", "away", "on"],
                answer: "up"
            },
            {
                category: "সাধারণ ইংরেজি",
                question: "What is the synonym of 'happy'?",
                options: ["Sad", "Joyful", "Angry", "Tired"],
                answer: "Joyful"
            }
        ];

        const TOTAL_QUESTIONS = 60; // Total number of questions as per user request (15 * 4)
        const DURATION_MINUTES = 60; // Total duration in minutes as per user request

        // --- DOM Elements ---
        const loginSection = document.getElementById('login-section');
        const testSection = document.getElementById('test-section');
        const resultsSection = document.getElementById('results-section');
        const loginForm = document.getElementById('login-form');
        const quizContainer = document.getElementById('quiz-container');
        const submitButton = document.getElementById('submit-button');
        const retakeButton = document.getElementById('retake-button');
        const userInfo = document.getElementById('user-info');
        const finalName = document.getElementById('final-name');
        const scoreElement = document.getElementById('score');
        const totalQuestionsElement = document.getElementById('total-questions');
        const congratulationsMessage = document.getElementById('congratulations');
        const tryAgainMessage = document.getElementById('try-again');
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const timerDisplay = document.getElementById('timer');

        let userName = '';
        let userMobile = '';
        let timerInterval;

        // --- Utility Functions ---
        function showMessage(message, type = 'error') {
            messageText.textContent = message;
            messageBox.className = `message-box p-4 rounded-lg shadow-lg show ${type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'}`;
            setTimeout(() => {
                messageBox.classList.remove('show');
            }, 3000);
        }

        function startTimer() {
            let totalSeconds = DURATION_MINUTES * 60;
            timerInterval = setInterval(() => {
                totalSeconds--;
                if (totalSeconds < 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "সময় শেষ!";
                    submitTest();
                    return;
                }
                const minutes = Math.floor(totalSeconds / 60);
                const seconds = totalSeconds % 60;
                timerDisplay.textContent = `সময় বাকি: ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }, 1000);
        }

        function renderQuestions() {
            quizContainer.innerHTML = ''; // Clear previous questions
            let currentCategory = '';
            questions.forEach((q, index) => {
                if (q.category !== currentCategory) {
                    currentCategory = q.category;
                    const categoryHeader = document.createElement('h3');
                    categoryHeader.classList.add('font-bold', 'text-gray-800', 'text-xl', 'mt-8', 'mb-4', 'border-b-2', 'border-blue-500', 'pb-2');
                    categoryHeader.textContent = currentCategory;
                    quizContainer.appendChild(categoryHeader);
                }
                
                const questionElement = document.createElement('div');
                questionElement.classList.add('bg-white', 'p-6', 'rounded-lg', 'shadow', 'border', 'border-gray-200');
                
                const questionTitle = document.createElement('h4');
                questionTitle.classList.add('font-semibold', 'text-gray-700', 'text-lg', 'mb-4');
                questionTitle.textContent = `${index + 1}. ${q.question}`;
                questionElement.appendChild(questionTitle);
                
                const optionsContainer = document.createElement('div');
                optionsContainer.classList.add('space-y-2');
                q.options.forEach(option => {
                    const optionLabel = document.createElement('label');
                    optionLabel.classList.add('block', 'bg-gray-50', 'p-3', 'rounded-lg', 'cursor-pointer', 'hover:bg-gray-200', 'transition', 'duration-200');
                    
                    const inputRadio = document.createElement('input');
                    inputRadio.type = 'radio';
                    inputRadio.name = `question-${index}`;
                    inputRadio.value = option;
                    inputRadio.classList.add('mr-2');
                    
                    optionLabel.appendChild(inputRadio);
                    optionLabel.appendChild(document.createTextNode(option));
                    optionsContainer.appendChild(optionLabel);
                });
                
                questionElement.appendChild(optionsContainer);
                quizContainer.appendChild(questionElement);
            });
        }

        function calculateScore() {
            let score = 0;
            questions.forEach((q, index) => {
                const selectedOption = document.querySelector(`input[name="question-${index}"]:checked`);
                if (selectedOption && selectedOption.value === q.answer) {
                    score++;
                }
            });
            return score;
        }

        function showResults(score) {
            loginSection.classList.add('hidden');
            testSection.classList.add('hidden');
            resultsSection.classList.remove('hidden');
            
            finalName.textContent = userName;
            scoreElement.textContent = score;
            totalQuestionsElement.textContent = TOTAL_QUESTIONS;

            if (score >= TOTAL_QUESTIONS * 0.5) {
                congratulationsMessage.classList.remove('hidden');
                tryAgainMessage.classList.add('hidden');
            } else {
                congratulationsMessage.classList.add('hidden');
                tryAgainMessage.classList.remove('hidden');
            }
        }

        function submitTest() {
            clearInterval(timerInterval);
            const score = calculateScore();
            showResults(score);
        }

        // --- Event Listeners ---
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const nameInput = document.getElementById('name');
            const mobileInput = document.getElementById('mobile');
            userName = nameInput.value.trim();
            userMobile = mobileInput.value.trim();

            if (userName === '' || userMobile === '') {
                showMessage('অনুগ্রহ করে আপনার নাম এবং মোবাইল নম্বর উভয়ই লিখুন।');
                return;
            }

            if (!/^\d{10}$/.test(userMobile)) {
                showMessage('অনুগ্রহ করে একটি বৈধ ১০-সংখ্যার মোবাইল নম্বর লিখুন।');
                return;
            }

            loginSection.classList.add('hidden');
            testSection.classList.remove('hidden');
            userInfo.textContent = `স্বাগতম, ${userName}! আপনার জন্য শুভকামনা। পরীক্ষার সময়: ৬০ মিনিট।`;
            renderQuestions();
            startTimer();
        });

        submitButton.addEventListener('click', () => {
            let allAnswered = true;
            questions.forEach((q, index) => {
                const selectedOption = document.querySelector(`input[name="question-${index}"]:checked`);
                if (!selectedOption) {
                    allAnswered = false;
                }
            });

            if (!allAnswered) {
                showMessage('জমা দেওয়ার আগে অনুগ্রহ করে সমস্ত প্রশ্নের উত্তর দিন।');
                return;
            }

            submitTest();
        });

        retakeButton.addEventListener('click', () => {
            resultsSection.classList.add('hidden');
            loginSection.classList.remove('hidden');
            loginForm.reset();
        });

    </script>
</body>
</html>
